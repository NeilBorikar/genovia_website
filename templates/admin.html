<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <title>Admin - Genovia</title>

  <link rel="stylesheet" href="{{ url_for('static', filename='styles.css') }}">
</head>

<body>

<div class="container">
  <h1 style="margin:30px 0;">ðŸ“© Contact Requests</h1>

  <table style="width:100%; border-collapse: collapse;">
    <thead>
      <tr style="background:#0f0f0f; color:white;">
        <th>ID</th>
        <th>Name</th>
        <th>Email</th>
        <th>Phone</th>
        <th>Company</th>
        <th>Message</th>
        <th>Action</th>
      </tr>
    </thead>

    <tbody>
      {% for c in contacts %}
      <tr style="border-bottom:1px solid #ddd;">
        <td>{{ c[0] }}</td>
        <td>{{ c[1] }}</td>
        <td>{{ c[2] }}</td>
        <td>{{ c[3] }}</td>
        <td>{{ c[4] }}</td>
        <td>{{ c[5] }}</td>
        <td>
          <button onclick="deleteContact({{ c[0] }})" class="btn btn-primary">
            Delete
          </button>
        </td>
      </tr>
      {% endfor %}
    </tbody>
  </table>
</div>

<script>
async function deleteContact(id){
  if(!confirm("Delete this request?")) return;

  const res = await fetch(`/delete/${id}`, {
    method: "POST"
  });

  const data = await res.json();
  alert(data.message);

  location.reload(); // refresh page
}
</script>

</body>
</html>